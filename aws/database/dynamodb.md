# Amazon DynamoDB

- 完全マネージド型のNoSQLデータベースサービス
  - ハイスケーラブルで無制限に性能を拡張できる
  - 負荷が高くなっても応答速度が低下しない低レイテンシー
  - 高可用性
  - マネージド型のためメンテナンスフリー
- KVS, ワイドカラム型
  - キーに対してカラムを大規模に登録できるのがワイドカラム型
  - キーとカラムが入れ子構造となったデータモデルを利用する
    - Key, Column, Row
- どんな規模にも対応する高速で柔軟な NoSQL データベースサービス

- プロビジョンドスループット
  - テーブルごとに Read と Write に必要なスループットキャパシティを割り当てる
- グローバルテーブル
- オンデマンドバックアップ
- Read/Write キャパシティオンデマンド

- JOIN/TRANSACTION/COMMIT/ROLLBACK はできない
  - 上記の処理が必要なデータ管理は RDS が向いている

## DynamoDB 活用のコツ

- DynamoDB ファースト
- 活用可否を検討し、適していない場合は RDS に置き換え

## 整合性モデル

- Write
  - 少なくとも2つのAZでの書き込み完了が確認できた時点で完了
- Read
  - 結果整合性モデル
    - 最新の書き込み結果が即時読み取り処理に反映されない可能性がある
  - 強い整合性モデル
    - GetItem/Query/Scanでは強い整合性のある読み込みオプションが指定可能

## パーティショニング

大量データを高速処理するためにパーティショニングによる分散処理を実施している

## ユースケース

- ビッグデータ
- アプリケーション

- ユーザー行動データ管理
- バックエンドデータ処理

## テーブル設計

- テーブル
- 項目（アイテム）
- 属性

## インデックス

### 暗号的なインデックス

テーブル作成時に1つの属性を選び宣言

- ハッシュキー
- レンジキー

### 明示的なインデックス

- Local Secondary Index(LSI)
  - 複合キー（レンジキー）によって整理されている項目に対してのみ設定可能。
- Global Secondary Index(GSI)
  - ハッシュキーをまたいで自由に検索ができるようになる
  - 使いすぎるとコストがかかる

## テーブル操作

- GetItem
- PutItem
- Update
- Delete
- Query
- Scan
- BatchGetitem

## DynamoDB Streams

テーブルに保存された項目の追加・変更・削除の発生時の履歴をキャプチャできる機能

### ユースケース

- データ更新をトリガーとしたアプリケーション機能やレプリケーションに活用できる

## DynamoDB Accelerator(DAX)

- DAX は DynamoDB にインメモリキャッシュ型の機能を付加する
