# Amazon Simple Storage Service(Amazon S3)

ユーザがデータを容量制限なく保存可能なマネージド型で提供されるオブジェクト型ストレージ

- S3 はリージョンに配置される
  - デフォルトで同一リージョン内の少なくとも3つのAZに複製される
- S3の値段はリージョン・タイプによって異なる
- インターネットからパブリック・アクセスの設定が可能
- 1バケット5TBまで

## S3の用途

- コンテンツ配信・保管
  - CMSから画像等のコンテンデータの保管先として利用する
- ログ・バッチの保管場所
- バックアップ/ディザスタリカバリ
- WEBの静的ホスティング
- データレイク

## AWSストレージサービスの形式

- ブロックストレージ
  - EC2にアタッチして活用するディスクサービス
  - ブロック形式でデータを保存
  - 高速・高帯域幅
  - e.g. EBS, インスタンスストア

- オブジェクトストレージ
  - 安価かつ高い耐久性を持つオンラインストレージ
  - オブジェクト形式でデータを保存
  - e.g. S3, Glacier
    - Glacierはデータ抽出に時間がかかるため、中長期でデータを保存したい場合に使用

- ファイルストレージ
  - 複数のEC2インスタンスから同時にアタッチ可能な共有ストレージサービス
  - ファイル形式でデータを保存
  - e.g. EFS

## ストレージタイプ

- STANDARD
- STANDARD-1A
- One Zone-1A
- RRS
  - 非推奨
- Amazon Glacier

耐久性は上位3つに関しては99.99999999999%（イレブンナイン）
可用性が異なってくる

## S3 Intelligent-Tiering

低頻度アクセスのオブジェクトを自動的に低頻度アクセス層に移動することでコストを削減する

## replication

- 異なる Amazon S3 バケット間で非同期にオブジェクトをコピー。リージョン間を跨ることも可能。
  - バージョンが変わったことをトリガーにReplication（複製）が行われるため、S3 バケットのバージョニングが必須

## AWS Storage Gateway

- 標準的なストレージプロトコルを利用して外部システム環境とAWSのストレージサービスとを接続するサービス
  - オンプレミス環境のバックアップをS3にとりたい場合等に使われる
- 保管型ボリュームを使用すると、プライマリデータをローカルに保存する一方で、そのデータを非同期に AWS にバックアップする
  - オンプレミスのアプリケーションがそのデータセット全体に低レイテンシーでアクセスできる

## S3 Transfer Acceleration

クライアントとS3バケットの間で、長距離にわたるファイル転送を高速、簡単、安全に実行

## Amazon S3 Glacier

- 中長期的に保存する(最低保持期間90日)
- S3より容量あたりの値段は安いが、データ取り出しはS3より高く、取り出しにも時間がかかる
ボールトの中にアーカイブとしてデータを保存する（1アーカイブで40TBまで）
- S3と違い、マネジメントコンソールからGUI操作でファイルをアップロードすることはできない
  - S3のライフサイクルで一定時間経過後にファイルをGlacierに移行するよう変更する
  - アプリケーション上で実行する
  - AWS CLIの操作によりアップロードする

### Glacier Deep Archive

- S3 Glacier より更に値段が安いが、時間はよりかかる
