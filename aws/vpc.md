# Virtual Private Cloud(VPC)

AWSクラウド内に論理的に分離されたセクションを作り、ユーザーが定義した仮想ネットワークを構築するサービス

## サブネット

サブネットマスクによりグループ化されたIPアドレスの範囲のネットワークのこと
サブネットとは、IPネットワークを論理的に細分化したもののことである。1つのネットワークを2つ以上のネットワークに分割することをサブネット化という 。 同一のサブネットに属するコンピュータは、IPアドレスの上位のビットが同じになっている。

例: 10.0.5.0/24, 10.0.5.1/24 10.0.10.0/24
上記の場合、前2つのIPアドレスが同一サブネットにあることになる。

## Classless Inter-Domain Routing(CIDR)

AWS VPC において許可されているのは `/28` ~ `/16` の範囲
サブネットマスクの値を設定し、同じネットワークとして扱うIPアドレスの個数を調整できるIPアドレスの設定方法
ネットワークの範囲を分割し、IPアドレスを見つけやすくする
サブネットマスクによるグループ化されたアドレス範囲内を**サブネット**と呼ぶ

196.51.XXX.XXX/16
/16の部分がサブネット
左から16桁目までが同じネットワーク範囲と指定
IPアドレスは0~255 × 4 で表されるが、本来は2進数8桁 × 4 として見る
上の例の場合、196.51はロックされ、XXX.XXXがIPアドレスとして利用される => 65534通りのIPアドレス

10.0.0.255/24
10.0.0までがロック

16, 24が推奨レンジ

## Direct Connect(専用線)

お客様のデータセンターやオフィスを専用線などを介してAWSへプライベートに接続するサービス

## VPC peering

2つのVPC間でのトラフィックルーティングが可能
一部のリージョン間の接続は限られている（中国は政治的な観点から情報統制されている）

## VPN 接続

カスタマーゲートウェイに静的ルートテーブルを構成することでVPN接続を設定できる

## アクセス制御

### VPCエンドポイント

VPC外にあるS3等のリソースにインターネットを介さずにアクセスができる

### ネットワークACL

Network Access Control List
ステートレスなファイアウォール
ブラックリスト形式
Amazon VPCのネットワークACL（アクセスコントロールリスト）は、サブネット内外のトラフィックを制御するファイアウォールとして任意のセキュリティを提供します。
セキュリティグループの設定と同じようにACLのルールを適応することによって、VPCに追加のセキュリティ層を提供します。
`Egress: true` とすることで、アウトバウンドルールの設定となる（ false はインバウンド）

### セキュリティグループ

ステートフルなファイアウォール
ホワイトリスト形式
サブネットレベルでなく、EC2インスタンスレベルで設定を行う

セキュリティグループは、同一グループ外のインスタンスと通信を行う際のトラフィックを制御するファイアウォールです。
VPC内でインスタンスを立ち上げた場合、同時に最大５つまでのセキュリティグループを設定することができます。 セキュリティグループは、サブネットレベルではなく、インスタンスレベルで設定します。
